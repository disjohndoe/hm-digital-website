# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

HM-Digital website is a bilingual (Croatian/English) business website built with Astro 5, TypeScript, and Tailwind CSS v4. It's a static site showcasing software development services.

## Development Commands

```bash
npm run dev          # Start dev server at localhost:4321
npm run build        # Build for production to ./dist/
npm run preview      # Preview production build locally
```

## Architecture

### Bilingual Routing

The site uses Astro's built-in i18n with custom routing logic:
- **Croatian (default)**: No prefix (e.g., `/`, `/o-nama`, `/usluge`)
- **English**: `/en/` prefix (e.g., `/en/`, `/en/about`, `/en/services`)

Key i18n functions in `src/i18n/ui.ts`:
- `getTranslations(locale)` - Get translation object for a locale
- `getLocaleFromPath(path)` - Extract locale from URL path
- `getPathForLocale(path, locale)` - Convert a canonical route key (e.g., '/kontakt') to locale-specific path
- `toLocaleUrl(currentUrl, targetLocale)` - Convert current URL to target locale (preserves query + hash)
- `getAlternateLocale(locale)` - Get the opposite locale
- `getRouteKeyFromPathname(pathname)` - Get the canonical route key from any localized path

Routes are defined in the `routes` object using canonical HR keys:
```ts
export const routes = {
  "/": { hr: "/", en: "/en/" },
  "/o-nama": { hr: "/o-nama", en: "/en/about" },
  // ...
}
```

### Translation Structure

Translations are defined as const objects in `src/i18n/hr.ts` and `src/i18n/en.ts`. Both files must have identical nested structure. The type `Translations` is derived from the Croatian translation object, ensuring type safety across languages.

When adding new translatable content:
1. Add the key to both `hr.ts` and `en.ts` with identical structure
2. Access via `getTranslations(locale).section.key`

### Content Collections

Projects use Astro Content Collections (`src/content/config.ts`) with Zod schema validation. Each project has:
- `title`, `description`, `tech` (array), `date`, `featured`, `locale`

Projects are filtered by locale when fetched.

### Component Organization

```
src/components/
├── layout/     # Header, Footer, Navigation (language-aware)
├── sections/   # Hero, About, Services, Projects, Contact
├── ui/         # Reusable components (Button, Card, LanguageSwitcher)
└── seo/        # MetaTags, StructuredData
```

All components use TypeScript interfaces for props. Follow the existing pattern of defining props interfaces before the component.

### Page Structure

Pages are in `src/pages/` with locale-based directory structure:
- Root pages (`.astro`) = Croatian versions
- `en/*.astro` = English versions

Each page gets its locale from `getLocaleFromPath(Astro.url.pathname)` and passes it to layout/components.

### Styling

- Tailwind CSS v4 with Vite plugin
- Custom theme extensions in `src/styles/global.css`
- Mobile-first responsive design
- Custom utilities: `.container-custom`, `.text-gradient`

## Configuration Notes

- **Site URL**: `https://hmdigital.hr` (set in `astro.config.mjs`)
- **Build output**: `directory` format (creates index.html in directories)
- **Sitemap**: Auto-generated by `@astrojs/sitemap`
- **TypeScript**: Extends `astro/tsconfigs/strict`
