---
import { getTranslations, getLocaleFromPath } from '../../i18n/ui';
import Button from '../ui/Button.astro';

const currentPath = Astro.url.pathname;
const locale = getLocaleFromPath(currentPath);
const t = getTranslations(locale);
---

<section class="py-16 lg:py-24 bg-slate-50">
  <div class="container-custom">
    <div class="max-w-2xl mx-auto">
      <form
        action="https://formspree.io/f/YOUR_FORM_ID"
        method="POST"
        class="bg-white rounded-xl shadow-sm border border-slate-200 p-6 lg:p-8"
        data-form-security
      >
        <!-- Honeypot field - hidden from humans, visible to bots -->
        <div style="position: absolute; left: -5000px;" aria-hidden="true">
          <label for="_honey">Don't fill this out if you're human:</label>
          <input type="text" id="_honey" name="_honey" tabindex="-1" autocomplete="off" />
        </div>
        <!-- Timestamp for submission time validation -->
        <input type="hidden" name="_form_timestamp" value="" />

        <div class="space-y-6">
          <div>
            <label for="name" class="block text-sm font-medium text-slate-700 mb-2">
              {t.contact.form.name}
            </label>
            <input
              type="text"
              id="name"
              name="name"
              required
              class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-colors placeholder:text-slate-400"
              placeholder={t.contact.form.namePlaceholder}
            />
          </div>

          <div>
            <label for="email" class="block text-sm font-medium text-slate-700 mb-2">
              {t.contact.form.email}
            </label>
            <input
              type="email"
              id="email"
              name="email"
              required
              class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-colors placeholder:text-slate-400"
              placeholder={t.contact.form.emailPlaceholder}
            />
          </div>

          <div>
            <label for="message" class="block text-sm font-medium text-slate-700 mb-2">
              {t.contact.form.message}
            </label>
            <textarea
              id="message"
              name="message"
              rows="5"
              required
              class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-colors resize-none placeholder:text-slate-400"
              placeholder={t.contact.form.placeholder}
            ></textarea>
          </div>

          <Button type="submit" variant="primary" size="lg" class="w-full">
            {t.contact.form.submit}
          </Button>
        </div>
      </form>

      <div class="mt-8 text-center">
        <p class="text-slate-600 mb-2">{t.contact.orEmail}</p>
        <a
          href={`mailto:${t.contact.email}`}
          class="text-primary-600 font-semibold hover:text-primary-700 transition-colors"
        >
          {t.contact.email}
        </a>
      </div>
    </div>
  </div>
</section>

<script is:inline src="/js/form-security.js"></script>
